<!DOCTYPE html>
<html lang="en">
<head>
    <!-- add mocha css, to show results -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mocha/3.2.0/mocha.css">
    <!-- add mocha framework code -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mocha/3.2.0/mocha.js"></script>
    <script>
        mocha.setup('bdd'); // minimal setup
    </script>
    <!-- add chai -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chai/3.5.0/chai.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sinon.js/15.2.0/sinon.min.js"></script>

    <script>
        // chai has a lot of stuff, let's make assert global
        let assert = chai.assert;
    </script>
    <title>Objects</title>
</head>
<body>
<script type="module" src="objects/object_this.js"></script>
<script src="objects/test_objects.js"></script>

<script>
    let isEmpty = function (obj) {
        for (let key in obj) {
            return false;
        }
        return true;
    }

    let sumObjectProperties = function (obj) {
        let sum = 0;
        for (let key in obj) {
            sum += isNaN(obj[key]) ? 0 : obj[key];
        }
        return sum;
    }

    let multipleNumeric = (obj) => {
        for (let key in obj) {
            if (typeof obj[key] == 'number') {
                obj[key] *= 2;
            }
        }
        return obj;
    }

    let calculator = {
        read() {
            let first = +prompt("Enter first number", 0);
            let second = +prompt("Enter second number", 0);
            this.first = first;
            this.second = second;
        },

        sum() {
            return this.first + this.second;
        },

        mul() {
            return this.first * this.second;
        }
    }

    function Calculator() {
        this.read = () => {
            let first = +prompt("Enter first number", 0);
            let second = +prompt("Enter second number", 0);
            this.first = first;
            this.second = second;
        };

        this.sum = () => {
            return this.first + this.second;
        };

        this.mul = () => {
            return this.first * this.second;
        }
    }

    function Accumulator(value) {
        this.value = value

        this.read = () => {
            this.value += +prompt("Enter number", 0);
        }
    }


    let ladder = {
        step: 0,
        up() {
            this.step++;
            return this;
        },
        down() {
            this.step--;
            return this;
        },
        showStep: function() { // shows the current step
            alert( this.step );
            return this
        }
    };



</script>

<div id="mocha"></div>
<!-- run tests! -->
<script>
    mocha.run();
    let toValueUser = {
        name: "John",
        money: 1000,

        valueOf() {
            return this.money;
        },

        toString() {
            return `{name: "${this.name}"}`;
        },
    }

    alert(toValueUser); // {name: "John", money: 1000, toValue: ƒ, toString: ƒ}
    alert(+toValueUser); // 1000
</script>
</body>
</html>